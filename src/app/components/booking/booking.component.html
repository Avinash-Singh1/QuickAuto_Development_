<!-- <app-navbar/> -->
<div class="container my-2">
  <div class="card shadow-lg">
    <div class="back-button-box card-header text-center bg-primary text-white ">
      <button class="backbtn btn btn-outline-light position-absolute" (click)="goBack()">
        <i class="fas fa-arrow-left"></i> Back
      </button>
      <h2>Travel Auto Booking</h2>
    </div>
    <div class="scrollable-form-container">
      <form #bookingForm="ngForm" (ngSubmit)="SubmitFormData(bookingForm.value)">
        <!-- Source and Destination Dropdown -->
        <div class="form-row justify-content-center submit-button-wrapper">
          <div class="form-group col-md-12">
            <label for="source">Source</label>
            <input
              id="source"
              type="text"
              class="myinputfields form-control"
              name="source"
              placeholder="Select source from Map"
              [(ngModel)]="booking.source"
              required readonly
            />
          </div>
          <div class="form-group col-md-12">
            <label for="destination">Destination</label>
            <input
              id="destination"
              type="text"
              class="myinputfields form-control"
              name="destination"
              placeholder="Select destination from Map"
              [(ngModel)]="booking.destination"
              required readonly
            />
          </div>
          <!-- <div class="form-group col-md-12">
            <label for="fare">Fare</label>
            <input
              id="fare"
              type="text"
              class="myinputfields form-control"
              name="fare"
              placeholder="Select fare from Map"
              [(ngModel)]="booking.fare"
              required readonly
            />
          </div> -->

          <div class="form-row fare_and_distance">
            <div class="form-group col-6 col-md-12">
              <label for="fare">Fare</label>
              <input
                id="fare"
                type="text"
                class="myinputfields form-control"
                name="fare"
                placeholder="Select fare from Map"
                [(ngModel)]="booking.fare"
                required readonly
              />
            </div>
          
            <div class="form-group col-6 col-md-12">
              <label for="distance">Distance</label>
              <input
                id="distance"
                type="text"
                class="myinputfields form-control"
                name="distance"
                placeholder="Select distance from Map"
                [(ngModel)]="booking.distance"
                required readonly
              />
            </div>
          </div>
          
        </div>

        <!-- Date Picker replaced by Custom Calendar -->
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="travelDate">Travel Date</label>
            <app-calender
              [availableDates]="availableDates"
              [unavailableDates]="unavailableDates"
              (dateSelected)="onDateSelected($event)"
            ></app-calender>
          </div>

          <!-- Travel Time -->
        <div class="form-group col-md-12">
          <label for="travelTime">Travel Time</label>
          <input type="time" id="travelTime" class="myinputfields form-control" name="travelTime" 
                [(ngModel)]="booking.travelTime" (change)="onTimeChange($event)" required />
        </div>


          <!-- Display the converted time -->
          <div class="form-group col-md-12">
            <label>Converted Time (12-hour format):</label>
            <div>{{ formattedTime }}</div>
          </div>
        </div>

        <!-- Proceed to Pay Button -->
        <div class="submitbtn m-2">
          <button type="submit" class="btn btn-success btn-lg" [disabled]="!bookingForm.valid || !isTimeAvailable">Proceed to Pay</button>
        </div>

        <!-- Alert for unavailable time -->
        <div *ngIf="!isTimeAvailable" class="alert alert-warning mt-2">
          The selected time is not available. Please choose another time.
        </div>
        <div *ngIf="!isTimeAvailable"  style="visibility: hidden;">
          The selected time is not available. Please choose another time.
        </div>
      </form>
      <div class="box">

      </div>
    </div>
  </div>
</div>
